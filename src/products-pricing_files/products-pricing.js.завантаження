var FIXED_LAYOUT=true;var page={setup:function(){var $tab=$(".tabs-panel.is-active");$("body").addClass("scroll-top");page.setupFixedSizing();$("#product-tabs").on("change.zf.tabs",function(){var $tab=$(".tabs-panel.is-active");page.setupFixedSizing($tab);page.setupHelpCells($tab);page.setupScenes($tab)});$("#product-tabs li, .hero--products__description").on("click",function(){var $target=$(this);var $tab=$($(this).attr("href"));if($target.is(".hero--products__description")){$("#product-tabs").foundation("selectTab",$tab);setTimeout(function(){page.scrollToTopOfTab($tab)},20)}else{page.scrollToTopOfTab($tab)}});this.setupHelpCells($tab);this.setupScenes($tab);setTimeout(function(){$("body").addClass("animate-in")},400)},setupFixedSizing:function($tab){var $scroll=$("#placeholder-pin");var $fixed=$("#scroll-pin");var $features=$("#section-features");var $content=$(".section-content",$features);if($tab&&!$tab.is("#tab-product")||$features.is(".setup")){return}$features.addClass("setup");$content.css("padding","0px");var padding=($(window).height()-$content.height())/2;$content.css("padding",Math.round(Math.max(padding,15))+"px 0");if(FIXED_LAYOUT){$scroll.css({position:"relative",height:$fixed.height()+"px"});$fixed.addClass("fixed").css("top",padding+"px")}},scrollToTopOfTab:function(){var desiredTop=$(".tabs-panel.is-active section:first-child").offset().top;var currentTop=$(window).scrollTop();if(desiredTop<currentTop){$(window).scrollTop(desiredTop)}else{TweenMax.to(window,.5,{scrollTo:{y:desiredTop}})}},setupHelpCells:function($context){$(".help-cell",$context).each(function(){var $cell=$(this);$cell.removeClass("hidden").css("max-height","none");$cell.css("max-height",$cell.height()+"px").addClass("hidden")})},lastScrollTop:0,lastDirection:"top",calculateScrollDirection:function(){var top=$(window).scrollTop();var atTop=top<200;var direction=top>this.lastScrollTop?"down":"up";if(atTop){if(this.lastDirection!=="top"){$("body").removeClass("scroll-up scroll-down").addClass("scroll-top")}return}if(direction!==this.lastDirection){$("body").removeClass("scroll-up scroll-down scroll-top").addClass("scroll-"+direction);this.lastDirection=direction}this.lastScrollTop=top},setupScenes:function($tab){if(this.controller){this.controller.destroy(true);this.controller=null}if(!$tab.is("#tab-product")){return}var MENU_HEIGHT=$(".carousel-menu").height();var ITEM_COUNT=5;var ITEM_HEIGHT=window.env.small?MENU_HEIGHT/(ITEM_COUNT+1):55;var DURATION_UNIT=400;var MASTER_OFFSET=0;var EASE_NONE=Linear.easeNone;var WINDOW_HEIGHT=$(window).height();var controller=this.controller=new ScrollMagic.Controller({refreshInterval:10});var master=new TimelineMax({duration:ITEM_COUNT});var $track=".carousel-menu .track.active";controller.scrollTo(function(newpos){TweenMax.to(window,.5,{scrollTo:{y:newpos}})});master.to($track,0,{height:0,ease:EASE_NONE},0);$(".carousel-menu li").each(function(i){var index=i+1;var $item=$(this);if(index<ITEM_COUNT){master.to($track,1,{height:index*ITEM_HEIGHT+ITEM_HEIGHT/4,ease:EASE_NONE},index-1)}else{master.to($track,1,{height:MENU_HEIGHT,ease:EASE_NONE},index-1)}new ScrollMagic.Scene({triggerElement:index===1?"body":"#section-features",triggerHook:0,duration:0,offset:MASTER_OFFSET+(index-1)*DURATION_UNIT,reverse:true}).setClassToggle(".product-carousel","active-"+index).addTo(controller);$item.find("a").on("click.scrollto",function(){controller.scrollTo($("#section-features").offset().top+(index-1)*DURATION_UNIT+DURATION_UNIT*.3)})});new ScrollMagic.Scene({triggerElement:"#section-features",triggerHook:0,duration:ITEM_COUNT*DURATION_UNIT,offset:MASTER_OFFSET,reverse:true}).setClassToggle(".product-carousel","active").setTween(master).setPin(FIXED_LAYOUT?"#placeholder-pin":"#scroll-pin").addTo(this.controller);new ScrollMagic.Scene({triggerElement:"#section-features",duration:WINDOW_HEIGHT/2,offset:MASTER_OFFSET,reverse:true}).setTween(function(){return(new TimelineMax).fromTo(".transactions",1,{y:WINDOW_HEIGHT/2},{y:0,ease:EASE_NONE},0).fromTo("#scroll-pin",1,{scale:.9,opacity:0},{scale:1,opacity:1,ease:EASE_NONE},0)}()).addTo(this.controller);new ScrollMagic.Scene({triggerElement:".section-platform-pricing",triggerHook:1,duration:WINDOW_HEIGHT,reverse:true}).setTween(function(){return(new TimelineMax).fromTo(".transactions",1,{y:0},{y:-WINDOW_HEIGHT,ease:EASE_NONE},0).to("#scroll-pin",1,{y:-WINDOW_HEIGHT,opacity:0,ease:EASE_NONE},0)}()).addTo(this.controller);new ScrollMagic.Scene({triggerElement:".section-platform-pricing",duration:WINDOW_HEIGHT,offset:MASTER_OFFSET,reverse:true}).setTween(function(){var timeline=new TimelineMax({duration:1});$("path, rect, polygon, circle",$(".section-platform-pricing .section-background svg")).each(function(){var $shape=$(this);var offset=Math.pow(Math.ceil($shape[0].getBoundingClientRect().width),2)*3;timeline.fromTo($shape,1,{y:offset/2},{y:-offset/2,ease:EASE_NONE},0)});return timeline}()).addTo(this.controller)}};$(function(){$(".nav-home").hide();page.setup()});$(function(){var mobileEnv=window.env.mobile;if(mobileEnv){$(".product").on("click",function(){$(this).toggleClass("product-mouseon")})}else{$(".product").hover(function(){$(this).toggleClass("product-mouseon")})}});
